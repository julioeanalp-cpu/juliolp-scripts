!function(){"use strict";const e={init:function(){this.setupFilters(),this.setupSearch(),this.setupSort()},setupFilters:function(){document.querySelectorAll(".filter-checkbox, .filter-option").forEach((e=>{e.addEventListener("change",(()=>this.applyFilters()))})),document.querySelectorAll(".filter-btn").forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault(),this.applyFilters()}))}))},setupSearch:function(){const e=document.querySelector("#product-search, .product-search");e&&(e.addEventListener("input",(t=>{clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout((()=>{this.filterBySearch(t.target.value)}),300)})),e.addEventListener("keypress",(e=>{"Enter"===e.key&&(e.preventDefault(),this.filterBySearch(e.target.value))})))},setupSort:function(){const e=document.querySelector("#sort-select, .sort-select");e&&e.addEventListener("change",(e=>{this.sortProducts(e.target.value)}))},applyFilters:function(){const e=this.getActiveFilters(),t=document.querySelectorAll(".product-item, .post");let r=0;t.forEach((t=>{const i=this.matchesFilters(t,e);t.style.display=i?"":"none",i&&r++})),this.updateResultCount(r)},getActiveFilters:function(){const e={categories:[],priceRange:null,search:""};return document.querySelectorAll(".filter-checkbox:checked").forEach((t=>{const r=t.getAttribute("data-category")||t.value;r&&e.categories.push(r.toLowerCase())})),document.querySelectorAll(".filter-option:checked").forEach((t=>{const r=t.getAttribute("data-filter-type");if("price"===r){const r=t.getAttribute("data-min"),i=t.getAttribute("data-max");e.priceRange={min:parseFloat(r)||0,max:parseFloat(i)||1/0}}})),e.search=(document.querySelector("#product-search, .product-search")?.value||"").toLowerCase(),e},matchesFilters:function(e,t){if(t.categories.length>0){const r=(e.getAttribute("data-category")||e.querySelector(".post-labels a")?.textContent||"").toLowerCase();if(!t.categories.some((e=>r.includes(e))))return!1}if(t.priceRange){const r=parseFloat(e.getAttribute("data-price")||e.querySelector(".item_price")?.textContent.replace(/[^\d.]/g,"")||"0");if(r<t.priceRange.min||r>t.priceRange.max)return!1}if(t.search){const r=(e.querySelector(".product-title, .post-title")?.textContent||"").toLowerCase(),i=(e.querySelector(".product-description, .post-snippet")?.textContent||"").toLowerCase();if(!r.includes(t.search)&&!i.includes(t.search))return!1}return!0},filterBySearch:function(e){const t=e.toLowerCase(),r=document.querySelectorAll(".product-item, .post");let i=0;r.forEach((e=>{const r=(e.querySelector(".product-title, .post-title")?.textContent||"").toLowerCase(),l=(e.querySelector(".product-description, .post-snippet")?.textContent||"").toLowerCase(),o=r.includes(t)||l.includes(t);e.style.display=o?"":"none",o&&i++})),this.updateResultCount(i)},sortProducts:function(e){const t=document.querySelector(".product-grid, .products-container");if(!t)return;const r=Array.from(t.querySelectorAll(".product-item, .post"));r.sort(((t,r)=>{switch(e){case"price-asc":return this.getPrice(t)-this.getPrice(r);case"price-desc":return this.getPrice(r)-this.getPrice(t);case"name-asc":return this.getName(t).localeCompare(this.getName(r));case"name-desc":return this.getName(r).localeCompare(this.getName(t));case"newest":return this.getDate(r)-this.getDate(t);default:return 0}})),r.forEach((e=>t.appendChild(e)))},getPrice:function(e){return parseFloat(e.getAttribute("data-price")||e.querySelector(".item_price")?.textContent.replace(/[^\d.]/g,"")||"0")},getName:function(e){return(e.querySelector(".product-title, .post-title")?.textContent||"").trim()},getDate:function(e){const t=e.getAttribute("data-date")||e.querySelector("time")?.getAttribute("datetime")||"";return t?new Date(t).getTime():0},updateResultCount:function(e){document.querySelectorAll(".results-count, .filter-count").forEach((t=>{t.textContent=`${e} produto${1!==e?"s":""} encontrado${1!==e?"s":""}`}))}};document.addEventListener("DOMContentLoaded",(()=>{e.init(),console.log("üîç Sistema de filtros JulioLP carregado")})),window.ProductFilters=e}();