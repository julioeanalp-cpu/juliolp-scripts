// JulioLP Wishlist Page v1.0 - Complete System
!function(){"use strict";document.addEventListener("DOMContentLoaded",function(){var e=document.getElementById("wishlist-grid"),t=document.getElementById("empty-wishlist");if(!e||!t)return;var a=localStorage.getItem("juliolp_wishlist");if(!a||"null"===a||"[]"===a)return void console.log("ℹ️ Lista de favoritos vazia");var r;try{r=JSON.parse(a)}catch(e){return void console.error("❌ Erro ao carregar favoritos:",e)}if(!Array.isArray(r)||0===r.length)return void console.log("ℹ️ Array vazio");t.style.display="none",e.style.display="grid",e.innerHTML=r.map(function(e,t){var a=e.url||"#",r=e.image||"https://via.placeholder.com/320?text=Sem+Imagem",n=e.title||"Produto sem título",o=e.price||"0.00";return"string"==typeof o&&(o=o.replace("€","").replace(",",".").trim()),'\n      <article class="product-card" data-url="'+a+'" data-index="'+t+'">\n        <div class="product-image">\n          <img class="product-thumb" \n               src="'+r+'" \n               alt="'+n+'"\n               loading="lazy"\n               onerror="this.onerror=null; this.src=\'https://via.placeholder.com/320?text=Sem+Imagem\';">\n          <button class="btn-remove-page" title="Remover dos favoritos">\n            <i class="fas fa-times"></i>\n          </button>\n        </div>\n        <div class="product-info">\n          <div class="product-title">'+n+'</div>\n          <div class="product-price">€'+o+'</div>\n          <button class="btn-add-cart-wish">\n            Adicionar ao carrinho\n          </button>\n        </div>\n      </article>\n    '}).join(""),e.addEventListener("click",function(n){if(n.target.closest(".btn-remove-page")){var o=n.target.closest(".product-card"),c=parseInt(o.dataset.index);r.splice(c,1),localStorage.setItem("juliolp_wishlist",JSON.stringify(r)),o.remove(),"function"==typeof updateWishlistCount&&updateWishlistCount(),0===r.length&&(t.style.display="block",e.style.display="none")}if(n.target.closest(".btn-add-cart-wish")){var i=n.target.closest(".product-card").dataset.url;if("function"==typeof addToCart)addToCart({dataset:{url:i}}),"function"==typeof openCart&&openCart();else if(i&&"#"!==i)window.location.href=i;else alert("Não foi possível adicionar ao carrinho. Por favor, clique no produto para ver detalhes.")}})})}();
