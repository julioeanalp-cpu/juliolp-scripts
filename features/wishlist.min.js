!function(){"use strict";const t={storageKey:"juliolp_wishlist",init:function(){this.loadWishlist(),this.setupEventListeners(),this.updateUI()},loadWishlist:function(){try{const t=localStorage.getItem(this.storageKey);this.items=t?JSON.parse(t):[]}catch(t){console.error("Erro ao carregar favoritos:",t),this.items=[]}},saveWishlist:function(){try{localStorage.setItem(this.storageKey,JSON.stringify(this.items))}catch(t){console.error("Erro ao salvar favoritos:",t)}},setupEventListeners:function(){document.addEventListener("click",(t=>{if(t.target.closest(".wishlist-btn, .add-to-wishlist")){t.preventDefault();const e=t.target.closest(".wishlist-btn, .add-to-wishlist"),i=e.getAttribute("data-product-id")||e.closest(".product-item, .post")?.getAttribute("data-product-id");i&&this.toggleWishlist(i,e)}}))},toggleWishlist:function(t,e){const i=this.items.findIndex((e=>e.id===t));if(i>-1)this.items.splice(i,1),this.showNotification("‚ùå Removido dos favoritos"),e.classList.remove("active"),e.innerHTML='<i class="far fa-heart"></i>';else{const i=this.getProductData(t,e);i&&(this.items.push(i),this.showNotification("‚ù§Ô∏è Adicionado aos favoritos!"),e.classList.add("active"),e.innerHTML='<i class="fas fa-heart"></i>')}this.saveWishlist(),this.updateUI()},getProductData:function(t,e){const i=e.closest(".product-item, .post");if(!i)return null;const s=i.querySelector(".product-title, .post-title")?.textContent||"Produto sem t√≠tulo",o=i.querySelector("img")?.src||"",a=i.querySelector(".item_price")?.textContent||"‚Ç¨0.00",n=i.querySelector("a")?.href||"#";return{id:t,title:s,image:o,price:a,url:n,addedAt:Date.now()}},updateUI:function(){const t=this.items.length;document.querySelectorAll(".wishlist-count").forEach((e=>{e.textContent=t,e.style.display=t>0?"inline-block":"none"})),document.querySelectorAll(".wishlist-btn, .add-to-wishlist").forEach((t=>{const e=t.getAttribute("data-product-id")||t.closest(".product-item, .post")?.getAttribute("data-product-id");e&&this.items.some((t=>t.id===e))?(t.classList.add("active"),t.innerHTML='<i class="fas fa-heart"></i>'):(t.classList.remove("active"),t.innerHTML='<i class="far fa-heart"></i>')})),this.updateWishlistPage()},updateWishlistPage:function(){const t=document.querySelector(".wishlist-items-container");if(!t)return;if(0===this.items.length)return void(t.innerHTML='<div class="empty-wishlist"><i class="far fa-heart" style="font-size:64px;opacity:0.3;margin-bottom:20px"></i><p>Sua lista de favoritos est√° vazia</p><a href="/" class="btn-primary">Explorar Produtos</a></div>');let e='<div class="wishlist-grid">';this.items.forEach((t=>{e+=`\n                <div class="wishlist-item" data-product-id="${t.id}">\n                    <button class="remove-wishlist" data-product-id="${t.id}" title="Remover">\n                        <i class="fas fa-times"></i>\n                    </button>\n                    <a href="${t.url}" class="wishlist-link">\n                        <div class="wishlist-image">\n                            <img src="${t.image}" alt="${t.title}" loading="lazy">\n                        </div>\n                        <div class="wishlist-info">\n                            <h4 class="wishlist-title">${t.title}</h4>\n                            <div class="wishlist-price">${t.price}</div>\n                        </div>\n                    </a>\n                    <button class="btn-add-cart simpleCart_shelfItem" \n                            data-name="${t.title}" \n                            data-price="${t.price.replace(/[^\d.]/g,"")}" \n                            data-image="${t.image}">\n                        <i class="fas fa-shopping-cart"></i> Adicionar ao Carrinho\n                    </button>\n                </div>\n            `})),e+="</div>",t.innerHTML=e},showNotification:function(t){const e=document.createElement("div");e.className="wishlist-notification",e.textContent=t,e.style.cssText="position:fixed;top:20px;right:20px;background:#333;color:#fff;padding:15px 25px;border-radius:8px;z-index:9999;animation:slideIn 0.3s ease",document.body.appendChild(e),setTimeout((()=>{e.style.animation="slideOut 0.3s ease",setTimeout((()=>e.remove()),300)}),2e3)},clearWishlist:function(){confirm("Deseja limpar toda a lista de favoritos?")&&(this.items=[],this.saveWishlist(),this.updateUI(),this.showNotification("üóëÔ∏è Lista de favoritos limpa"))},getWishlistItems:function(){return[...this.items]}};document.addEventListener("DOMContentLoaded",(()=>{t.init(),console.log("‚ù§Ô∏è Sistema de favoritos JulioLP carregado")})),window.Wishlist=t}();
