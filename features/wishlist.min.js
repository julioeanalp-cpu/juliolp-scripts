// JulioLP Wishlist System v1.0 - LocalStorage Optimized
!function(){"use strict";var t="juliolp_wishlist";function e(){var e=localStorage.getItem(t);if(!e||"null"===e||"[]"===e)return[];try{var n=JSON.parse(e);return Array.isArray(n)?n:[]}catch(t){return console.error("Erro ao carregar favoritos:",t),[]}}function n(e){try{localStorage.setItem(t,JSON.stringify(e))}catch(t){console.error("Erro ao salvar favoritos:",t)}}function a(){var t=e().length,n=document.querySelector(".wishlist-count");n&&(n.textContent=t,n.style.display=t>0?"flex":"none")}function o(t){var o=e(),i=o.findIndex(function(e){return e.url===t.url});i>-1?(o.splice(i,1),n(o),console.log("‚ù§Ô∏è Removido dos favoritos")):(o.push(t),n(o),console.log("üíö Adicionado aos favoritos")),a();var r=document.querySelectorAll('.btn-wishlist[data-url="'+t.url+'"]');r.forEach(function(t){c(t)})}function c(t){var n=t.dataset.url,a=e().some(function(t){return t.url===n});t.classList.toggle("active",a),t.innerHTML=a?'<i class="fas fa-heart"></i>':'<i class="far fa-heart"></i>',t.setAttribute("aria-label",a?"Remover dos favoritos":"Adicionar aos favoritos")}window.updateWishlistCount=a,window.toggleWishlist=o,document.addEventListener("DOMContentLoaded",function(){a(),document.querySelectorAll(".btn-wishlist").forEach(function(t){c(t),t.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation();var e=this.dataset.url,n=this.dataset.title||"Produto",a=this.dataset.price||"0.00",c=this.dataset.image||"";if(!e)return void console.error("URL do produto n√£o encontrada");o({url:e,title:n,price:a,image:c})})})})}();
