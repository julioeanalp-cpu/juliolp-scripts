// JulioLP Search System v1.0 - Mobile Optimized
!function(){"use strict";function e(){var e=document.getElementById("searchInput"),t=document.getElementById("searchResults");if(e&&t){var n=e.value.toLowerCase().trim();if(n.length<2)return void(t.innerHTML="");var r=document.querySelectorAll(".product-card");if(0===r.length)return void(t.innerHTML='<div class="no-results">Nenhum produto encontrado</div>');var a=[],c=new Set;r.forEach(function(e){var t=e.querySelector(".product-title"),r=e.querySelector(".product-price"),o=e.querySelector(".product-thumb"),i=e.querySelector('a[href*="/p/"]')||e.querySelector("a");if(t){var s=t.textContent.toLowerCase();if(s.includes(n)){var l=i?i.href:"#",u=o?o.src:"",d=r?r.textContent.trim():"â‚¬0.00";c.has(l)||(c.add(l),a.push({title:t.textContent.trim(),price:d,image:u,url:l}))}}}),a.length>0?t.innerHTML=a.slice(0,5).map(function(e){return'\n        <div class="search-result-item" data-url="'+e.url+'">\n          <img src="'+e.image+'" alt="'+e.title+'" loading="lazy" onerror="this.src=\'https://via.placeholder.com/50?text=Disco\'">\n          <div class="result-info">\n            <div class="result-title">'+e.title+'</div>\n            <div class="result-price">'+e.price+"</div>\n          </div>\n        </div>\n      "}).join(""):t.innerHTML='<div class="no-results"><i class="fas fa-search"></i> Nenhum resultado para "'+n+'"</div>',t.style.display="block",document.querySelectorAll(".search-result-item").forEach(function(e){e.addEventListener("click",function(){var e=this.dataset.url;e&&"#"!==e&&(window.location.href=e)})})}}document.addEventListener("DOMContentLoaded",function(){var t=document.getElementById("searchInput"),n=document.getElementById("searchResults"),r=document.getElementById("mobileSearchToggle"),a=document.getElementById("mobileSearchBox"),c=document.getElementById("mobileSearchClose"),o=null;if(t&&(t.addEventListener("input",function(){clearTimeout(o),o=setTimeout(e,300)}),t.addEventListener("focus",function(){e()})),n&&document.addEventListener("click",function(e){n.contains(e.target)||t.contains(e.target)||(n.style.display="none")}),r&&a&&c){var i=function(){a.classList.add("active"),document.body.style.overflow="hidden";var t=a.querySelector("#searchInput");t&&setTimeout(function(){t.focus()},100)},s=function(){a.classList.remove("active"),document.body.style.overflow="",n&&(n.style.display="none")};r.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),i()}),c.addEventListener("click",s),a.addEventListener("click",function(e){e.target===a&&s()}),document.addEventListener("keydown",function(e){"Escape"===e.key&&a.classList.contains("active")&&s()})}})}();
