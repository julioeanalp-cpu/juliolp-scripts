!function(){"use strict";const e={maxRelated:4,init:function(){this.showRelatedProducts()},showRelatedProducts:function(){const e=document.querySelector(".related-products-container");if(!e)return;const t=this.getCurrentCategory(),r=this.getCurrentProductId(),o=this.getRelatedProducts(t,r,this.maxRelated);if(0===o.length)return void(e.style.display="none");let a='<div class="related-products"><h3 class="section-title">Produtos Relacionados</h3><div class="product-grid">';o.forEach((e=>{a+=this.createProductCard(e)})),a+="</div></div>",e.innerHTML=a,e.style.display="block"},getCurrentCategory:function(){const e=document.querySelector(".post-labels a");return e?e.textContent.toLowerCase():""},getCurrentProductId:function(){const e=new URLSearchParams(window.location.search);return e.get("id")||document.querySelector("[data-product-id]")?.getAttribute("data-product-id")||""},getRelatedProducts:function(e,t,r){const o=[];return document.querySelectorAll(".product-item, .post").forEach((a=>{if(a.getAttribute("data-product-id")===t)return;const d=(a.getAttribute("data-category")||a.querySelector(".post-labels a")?.textContent||"").toLowerCase();d.includes(e)&&o.push({id:a.getAttribute("data-product-id")||Math.random().toString(36).substr(2,9),title:a.querySelector(".product-title, .post-title")?.textContent||"",image:a.querySelector("img")?.src||"",price:a.querySelector(".item_price")?.textContent||"",url:a.querySelector("a")?.href||"#"})})),this.shuffleArray(o).slice(0,r)},createProductCard:function(e){return`\n            <div class="product-item" data-product-id="${e.id}">\n                <a href="${e.url}" class="product-link">\n                    <div class="product-image">\n                        <img src="${e.image}" alt="${e.title}" loading="lazy">\n                    </div>\n                    <div class="product-info">\n                        <h4 class="product-title">${e.title}</h4>\n                        <div class="product-price">\n                            <span class="item_price">${e.price}</span>\n                        </div>\n                    </div>\n                </a>\n            </div>\n        `},shuffleArray:function(e){const t=[...e];for(let e=t.length-1;e>0;e--){const r=Math.floor(Math.random()*(e+1));[t[e],t[r]]=[t[r],t[e]]}return t}};document.addEventListener("DOMContentLoaded",(()=>{const t=document.querySelector(".post-body");t&&(e.init(),console.log("ðŸŽµ Sistema de produtos relacionados carregado"))})),window.RelatedProducts=e}();
