// JulioLP Image Optimizer v1.0 - LQIP + Lazy Loading
!function(){"use strict";function e(){if("IntersectionObserver"in window){var e={root:null,rootMargin:"50px",threshold:.01},t=new IntersectionObserver(function(e,t){e.forEach(function(e){if(e.isIntersecting){var a=e.target;if(a.dataset.src){var r=new Image;r.onload=function(){a.src=r.src,a.classList.add("loaded"),a.removeAttribute("data-src")},r.onerror=function(){a.src="https://via.placeholder.com/400x400?text=Imagem+Indisponível",a.classList.add("error")},r.src=a.dataset.src,t.unobserve(a)}}})},e);document.querySelectorAll("img[data-src]").forEach(function(e){t.observe(e)})}else document.querySelectorAll("img[data-src]").forEach(function(e){var t=e.dataset.src;if(t){var a=new Image;a.onload=function(){e.src=a.src,e.classList.add("loaded")},a.onerror=function(){e.src="https://via.placeholder.com/400x400?text=Imagem+Indisponível",e.classList.add("error")},a.src=t}})}document.addEventListener("DOMContentLoaded",function(){var t=document.querySelectorAll('img[loading="lazy"]');t.forEach(function(e){e.style.opacity||(e.style.opacity="0",e.style.transition="opacity 0.3s ease"),e.complete?e.style.opacity="1":e.addEventListener("load",function(){e.style.opacity="1"})}),e();var a=document.querySelectorAll(".product-thumb, .vinyl-image img");a.forEach(function(e){e.loading="lazy",e.setAttribute("decoding","async");var t=e.getAttribute("onerror");t||(e.setAttribute("onerror","this.onerror=null; this.src='https://via.placeholder.com/400x400?text=Disco+Vinil';"),e.style.backgroundColor="#f0f0f0")})})}();
